<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Tombstone Grand Hotel â€“ Mayte Dashboard</title>
<style>
:root{--accent:#005ea0;--text:#222;--bg:#fff;--border:#e5e7eb;--running:#22c55e;--idle:#9ca3af;--arrival:#fff7e6;--stayover:#ecfdf5;--departure:#fef2f2;}
html,body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,sans-serif;background:var(--bg);color:var(--text);}
header{background:var(--accent);color:#fff;padding:12px 20px;display:flex;justify-content:space-between;align-items:center;}
h1{margin:0;font-size:1.3rem;}#clock{font-weight:600;}main{padding:10px;}button{border:none;border-radius:6px;padding:6px 12px;background:var(--accent);color:#fff;cursor:pointer;}button:hover{background:#00447d;}
table{width:100%;border-collapse:collapse;font-size:0.9rem;}th,td{border:1px solid var(--border);padding:6px;text-align:left;}th{background:#f3f4f6;}
.timer.running{color:var(--running);font-weight:600;}.timer.idle{color:var(--idle);}@media(max-width:768px){table{font-size:0.8rem;}th,td{padding:4px;}}
</style>
</head>
<body>
<header><h1>Mayte's Dashboard</h1><div id="clock">--:--:--</div></header>
<main>
<div id="summary" style="margin-bottom:8px;font-weight:600;"></div>
<table id="roomTable"><thead><tr><th>Room</th><th>Type</th><th>Occupancy</th><th>Guest Status</th><th>HK Status</th><th>Notes</th><th>Timer</th></tr></thead><tbody id="roomBody"></tbody></table>
</main>
<script>
function updateClock(){const now=new Date();const h=String(now.getHours()).padStart(2,"0");const m=String(now.getMinutes()).padStart(2,"0");const s=String(now.getSeconds()).padStart(2,"0");document.getElementById("clock").textContent=`${h}:${m}:${s}`;}setInterval(updateClock,1000);updateClock();
const occupancyOpts=["Vacant","Occupied"];const guestOpts=["Arrival","Stayover","Departure"];const hkOpts=["Dirty","In Progress","Clean","Inspected"];let timers={};
const currentAttendant="Mayte";
function initTable(){const tbody=document.getElementById('roomBody');tbody.innerHTML='';const saved=JSON.parse(localStorage.getItem('hkData'))||[];const assigned=saved.filter(row=>row.attendant===currentAttendant);assigned.forEach((rowData,idx)=>{const tr=document.createElement('tr');const roomNum=rowData.room;const type=rowData.type;const occVal=rowData.occupancy||'Vacant';const guestVal=rowData.guestStatus||'Arrival';const hkVal=rowData.hkStatus||'Dirty';const notesVal=rowData.notes||'';tr.innerHTML=\`<td>${roomNum}</td><td>${type}</td><td><select class='occSel'>${occupancyOpts.map(o=>`<option${o===occVal?' selected':''}>${o}</option>`).join('')}</select></td><td><select class='guestSel'>${guestOpts.map(o=>`<option${o===guestVal?' selected':''}>${o}</option>`).join('')}</select></td><td><select class='hkSel'>${hkOpts.map(o=>`<option${o===hkVal?' selected':''}>${o}</option>`).join('')}</select></td><td contenteditable='true' class='notes'>${notesVal}</td><td class='timer idle'>00:00:00</td>\`;tbody.appendChild(tr);});attachListeners();updateSummary();}
function attachListeners(){document.querySelectorAll('.hkSel').forEach((sel,idx)=>{sel.addEventListener('change',e=>{const val=e.target.value;const tr=e.target.closest('tr');const timerEl=tr.querySelector('.timer');if(val==='In Progress')startTimer(timerEl,idx);else if(['Clean','Inspected'].includes(val))stopTimer(timerEl,idx);saveData();});});document.querySelectorAll('.occSel, .guestSel, .notes').forEach(el=>{el.addEventListener('change',saveData);el.addEventListener('input',saveData);});}
function startTimer(el,idx){if(timers[idx])return;const start=Date.now();el.classList.add('running');el.classList.remove('idle');timers[idx]=setInterval(()=>{const diff=Date.now()-start;const h=String(Math.floor(diff/3600000)).padStart(2,'0');const m=String(Math.floor((diff%3600000)/60000)).padStart(2,'0');const s=String(Math.floor((diff%60000)/1000)).padStart(2,'0');el.textContent=`${h}:${m}:${s}`;},1000);}function stopTimer(el,idx){if(!timers[idx])return;clearInterval(timers[idx]);timers[idx]=null;el.classList.remove('running');el.classList.add('idle');}
function saveData(){const rows=[...document.querySelectorAll('#roomBody tr')];const data=JSON.parse(localStorage.getItem('hkData'))||[];rows.forEach(r=>{const room=r.children[0].innerText;const item=data.find(d=>d.room==room && d.attendant===currentAttendant);if(item){item.occupancy=r.querySelector('.occSel').value;item.guestStatus=r.querySelector('.guestSel').value;item.hkStatus=r.querySelector('.hkSel').value;item.notes=r.querySelector('.notes').innerText.trim();}});localStorage.setItem('hkData',JSON.stringify(data));updateSummary();}
function updateSummary(){const data=JSON.parse(localStorage.getItem('hkData'))||[];const assigned=data.filter(row=>row.attendant===currentAttendant);document.getElementById('summary').textContent='Assigned Rooms: '+assigned.length;}
window.addEventListener('load',()=>{initTable();});
</script>
</body>
</html>
